# Разработка математической модели для обеспечения безопасности автономного расхождения судов в водах с повышенной интенсивностью движения

Ключевые слова: безопасное расхождение судов, автономное расхождение судов, предотвращение столкновений

## Аннотация
Проблема обеспечения безопасности мореплавания в условиях увеличивающейся плотности движения судов приобретает особую актуальность с внедрением автономных судов. Несмотря на снижение человеческих ошибок благодаря автоматизации, остаются нерешенными задачи координации судов в сложных условиях, таких как высокая интенсивность движения, неблагоприятные погодные условия и наличие опасных зон. В статье представлена математическая модель, описывающая поведение группы судов для избежания столкновений с учетом правил **МППСС-72 [1]**. Исследованы существующие подходы к решению задачи, определены критерии для сравнения методов, проведена оценка их эффективности с целью выбора метода решения. 

## Введение
На фоне роста мирового судоходного трафика и увеличения плотности движения судов в водных пространствах проблема обеспечения безопасности мореплавания приобретает особую актуальность, поскольку усложняется предотвращение аварийных ситуаций и минимизация рисков столкновений. Многие страны **[1]** внедряют автономные суда. Несмотря на технические достижения, проблема предотвращения столкновения остается актуальной. Автономные суда способны уменьшить человеческие ошибки, но сталкиваются с проблемой координации в сложных условиях (повышенная плотность движения судов, погодные условия, наличие опасных зон для движения - отмели, подводные скалы). Создание и совершенствование методов, учитывающих правила безопасности движения судов [2] и внешние факторы, способно уменьшить риски возникновения аварийных ситуаций.

Целью данной статьи является разработка математической модели, описывающей поведение группы судов для избежания столкновения. Объектом исследования выступает система управления автономными судами и её взаимодействие с окружающей средой при выполнении маневров расхождения в водных пространствах, а предметом исследования – методы и алгоритмы обеспечения безопасности автономного расхождения судов в условиях плотного морского трафика и изменяющихся внешних факторов.

В ходе проведения исследования были решены задачи, перечисленные ниже.

1. Выполнить обзор существующих методов и алгоритмов автономного расхождения судов в водных пространствах.
2. Определение критериев сравнения методов автономного расхождения судов в водных пространствах.
3. Сравнение выбранных методов по выбранным критериям.
4. Разработка математической модели, описывающей взаимодействие судна с другими объектами в водном пространстве.

## Обзор предметной области

### Принцип отбора аналогов

В роли сравнительных аналогов были рассмотрены алгоритмы и методы, используемые для решения задач, связанных с безопасным автономным расхождением группы судов в водном пространстве. Основным критерием при выборе аналогов служили пределы применимости соответствующих алгоритмов. Поиск аналогов проводился с использованием таких ресурсов, как Google Scholar, электронная библиотека eLibrary и поисковая система Google. При поиске использовались следующие ключевые запросы: "безопасное расхождение судов", "автономное расхождение судов", "multi-ship anti-collision", "automatic collision avoidance of multiple ships".

#### Кооперативное маневрирование
В статье [3] рассматривается проблема безопасного расхождения безэкипажных судов в зонах интенсивного судоходства. Суда классифицируются на четыре группы: привилегированные, опасно идущие, обязанные маневрировать и ограничивающие решение. Для каждой единицы анализируется навигационная ситуация, включая прогнозы маршрутов, риски столкновений, выхода на мель и попадания в запретные зоны. Оценка рисков производится по шкале RYG («красный» – «желтый» – «зеленый»). На основе этих данных формируется множество опасных сближений, где суда распределяются на классы А (привилегированные) и В (обязанные маневрировать). Затем ищется наиболее благоприятное решение для изменения их траекторий. Если решения нет, применяются смягчения ограничений путем перераспределения судов между группами. Алгоритм требует обмена данными между судами.

#### Учет намерений судов
В статье [4] рассматривается проблема безопасного расхождения судов в условиях плотного морского трафика. Используются геометрические модели движения, где каждое судно имеет свои параметры: положение, скорость и время наблюдения. Рассчитываются относительные скорости и дистанции максимального сближения (CPA), а также время этого сближения (TCPA). Маневры включают изменение курса (четыре варианта) и/или скорости (два варианта). Предложен алгоритм для совместного маневрирования, который последовательно определяет опасные пары судов и рассчитывает необходимые маневры. Если маневры невозможны, процесс начинается заново с другой парой. Метод подходит для автономных и традиционных судов. Проведены многочисленные эксперименты с различными сценариями, включая группу из семи судов.

#### Linear exstension algorithms
В статье [5] представлена распределённая система предотвращения столкновений судов согласно правилам МППСС-72. Каждое судно самостоятельно принимает решения на основе своих наблюдений и информации от соседних судов. Эффективность маневров оценивается через расчёт CPA для планируемых траекторий. Используется модель Номото для описания манёвренности судна. Проводились симуляции в MATLAB с участием четырёх судов, проверяя соблюдение правил МППСС-72 в различных сценариях.

#### Deep Reinforced Learning
В статье [6] представлен новый метод автоматического предотвращения столкновений судов на основе глубокого обучения с подкреплением (DLR), особенно актуальный для ограниченных водных пространств. Подход включает два режима управления: обычный и предотвращения столкновений. Для создания модели DLR использован алгоритм глубокого Q-обучения и формализация задачи через марковский процесс принятия решений (MDP). В работе учтён человеческий опыт предотвращения столкновений, включая использование зон безопасности, прогнозируемых областей опасности и навигационных ограничений. Переключение режимов происходит с помощью бортовых датчиков. Экспериментальные испытания трёх самоходных судов подтвердили эффективность предложенной методики.

#### Evolutionary Sets of Safe Ship Trajectories
В статье [7] представлен обновленный метод нахождения безопасных траекторий судов с использованием эволюционных алгоритмов и элементов теории игр. Метод обеспечивает наиболее благоприятное решение для всех участников маневра в соответствии с МППСС-72 в режиме реального времени, выдавая результат менее чем за минуту. Подход успешно прошел тестирование в симуляции, показав превосходство над аналогичными методами. Дополнительно описан механизм предотвращения столкновений с неподвижными объектами. Для применения в реальных условиях авторы рекомендуют улучшить гидродинамическую модель судна и расширить соответствие алгоритма правилам МППСС-72, включая схемы разделения движения.

### Критерии сравнения аналогов

#### Адаптивность к внешним факторам
Данный критерий отражает способность алгоритма учитывать и адаптироваться к меняющимся внешним условиям, таким как погода, состояние моря, наличие запрещенных зон для движения и статических объектов. Оценка происходит через моделирование различных сценариев с изменением этих факторов и проверку того, насколько эффективно алгоритм реагирует на новые вводные данные.

#### Соответствие нормативам
Методы оцениваются по тому, насколько их решения соответствуют действующим международным нормам и правилам навигации, таким как МППСС-72. Несоответствие этим правилам может сделать предложенное решение небезопасным или незаконным, поэтому этот критерий крайне важен для оценки практической применимости алгоритма.

#### Масштабируемость
Данный критерий измеряет способность системы поддерживать свою эффективность при увеличении количества судов в зоне ответственности Оценка осуществляется путём сравнения результатов работы алгоритма в условиях различной загруженности водного пространства с ожидаемыми результатами, соответствующими безопасным и эффективным маршрутам для всех судов.

### Таблица сравнения аналогов

**Таблица 1 -- Сравнение аналогов по критериям.**
| Аналог                           | Адаптивность к внешним факторам | Соответствие нормативам | Масштабируемость |
|----------------------------------|---------------------------------|-------------------------|---------------------------|
| Кооперативное маневрирование     | учет наличия опасных зон (мелководье) | соответствует  | неизвестно (в статье метод не проверялся в компьютерной среде или в реальных условиях) |
| Учет намерений судов | не учитываются внешние факторы | соответствует | безопасное расхождение достигалось при 7 судах |
| Linear exstension algorithms  | учет наличия статических объектов, опасных зон| соответствует                  | безопасное расхождение достигалось при 4 судах |
| Deep Reinforced Learning  | учет наличия статических объектов, опасных зон | соответствует | безопасное расхождение достигалось при трех моделей судов |
| Evolutionary Sets of Safe Ship Trajectories | учет наличия опасных зон, статических объектов | соответствует  | безопасное расхождение достигалось при 6 судах|

### Выводы по итогам сравнения 
Анализируя результаты таблицы 1, можно сделать несколько выводов:
- Адаптивность к внешним факторам:
Deep Reinforced Learning, Linear extension algorithms и Evolutionary Sets of Safe Ship Trajectories учитывают наличие опасных зон и статических объектов. Это важный фактор для обеспечения безопасности в реальных условиях. Но данные аналоги не учитываю погодные условия и состояние моря.

- Соответствие нормативам:
Все представленные аналоги соответствуют нормативам, что является необходимым условием для их практического применения.

- Масштабируемость:
   - Наибольшей масштабируемостью обладает Учет намерений судов, демонстрируя успешное расхождение при 7 судах.
   - Evolutionary Sets of Safe Ship Trajectories также показывают неплохую масштабируемость, работая с 6 судами.
   - Linear extension algorithms и Deep Reinforced Learning имеют меньшую масштабируемость, достигающую 4 и 3 судов соответственно.
   - Кооперативное маневрирование не предоставляет данных о масштабируемости, что оставляет вопросы об его применении в реальных условиях.

Исходя из этих выводов, наиболее перспективным аналогом для безопасного автономного расхождения судов являются Evolutionary Sets of Safe Ship Trajectories. Этот метод  демонстрирует баланс между выбранными критериями сравнения.

## Выбор метода решения
На основе проведенного анализа, разрабатываемое решение должно включать следующие характеристики:
- учет внешних факторов, таких как погодные условия (скорость и направление ветра, условия видисмости), состояние моря.
- способность безопасного расхождения при увеличение судоходного трафика.

## Описание метода решения 
Важным аспектом современного судоходства является предотвращение столкновений судов, особенно в условиях интенсивного морского трафика. Данная математическая модель описывает поведение группы судов с целью избежания аварийных ситуаций, учитывая различные факторы, такие как характеристики самих судов, окружающее пространство, погодные условия и международные правила предотвращения столкновений (МППСС-72). 

При построении модели будем использовать следующие принципы: 
1. Соблюдение международных правил предотвращения столкновений судов **(МППСС-72) [1]**. Основными правилами будут выступать правила уступки дороги при пересечении курсов (Когда два судна с механическими двигателями идут пересекающимися курсами так, что возникает опасность столкновения, то судно, которое имеет другое на своей правой стороне, должно уступить дорогу другому судну и при этом оно должно, если позволяют обстоятельства, избегать пересечения курса другого судна у него по носу); алгоритм действий при встречном движении (Когда два судна с механическими двигателями сближаются на противоположных так, что возникает опасность столкновения, каждое из них должно изменить свой курс вправо, с тем чтобы каждое судно прошло у другого по левому борту). 
2. Минимизация рисков столкновения:
    - Оценивается вероятность столкновения на основе анализа взаимного положения судов.
    - Осуществляется  изменение курса и/или скорости для снижения риска. 
3. Учет внешних факторов. Учитываются погодные условия (видимость, скорость и направление ветра), морские волнения и течение, опасные зоны (отмель, подводные скалы). В сложных условиях видимости предполагается, что судна будут двигаться с меньшей скоростью и находится в больших расстояниях друг от друга. 
4. Ограниченность маневренных возможностей крупных судов. Большие суда из-за своих больших габаритов ограничены в маневренных возможностях, поэтому они будут придерживаться своего курса и скорости. 
5. Постоянный мониторинг текущей ситуации при совершении маневра для корректировки или изменения принятого решения.

Структура разрабатываемой модели может быть описана следующим образом: M=<S, E, {s}, D>. Здесь S = <P(t), V(t), T(t), (w, l)> - состояние судна (характеристики судна): 
- P(t) =(x, y) - позиция судна в момент времени t; 
- V(t) -  скорость судна в момент времени t; 
- T(t) - курс судна в момент времени t; 
- (w, l) - Габариты судна (ширина, длина). 
E = <{z}, W, U>- внешние факторы: 
- {z} - множество зон, запрещенных для движения. Каждый элемент такого множества представляет собой набор (x, y) координат, образующих область запрещенную для движения. Например, отмели, подводные скалы; 
- W - погодные условия, включающие в себя такие факторы, как видимость (v), ветер (скорость ветра v_w, направление ветра d_w);
- U - морские волнения, течение (скорость течения v_c, направление течения d_c). 
- {s} = {s_1, s_i, ...} i =1…n ∈  N - множество других судов, где каждое судно имеет набор своих характеристик (P_i(t), V_i(t), T_i(t), (w, l)); 
D = d(t, S, E, {s})- функция принятия решения. Данная функция в течение времени t на основе других компонентов принимает решение об изменение курса и/или скорости для избежания столкновения. Алгоритм принятия решения основывается на нескольких этапах: мониторинг текущей ситуации, анализ рисков, выбор маневра, контроль выполнения маневра и повторный анализ.

В каждый момент времени производится мониторинг текущей ситуации в водных пространствах и анализ рисков столкновения судов. При появлении угрозы столкновения должны приниматься решения по корректировке или изменению курса/скорости.

В начальный момент времени передаются данные о состоянии судна и об окружение (внешние факторы и другие суда).
Для компонента S позиция судна в следующий момент времени рассчитывается на основе текущего положения P(t), скорости V(t) и  курса T(t) по заданному маршруту. Скорость судна изменяется в зависимости от текущих условий (погода, риски столкновения и др). Если необходимо избежать столкновение скорость может быть увеличена или уменьшена вплоть до полной остановки судна. Курс судна меняется, когда нужно совершить маневр уклонения. Изменения курса меняются в соответствие с правилами МППСС-72.

Для компонента {s} информация об окружающих судах обновляется на каждом временном шаге. Данные вычисление для каждого судна из множества происходят аналогично вычислениям для компонента S.

Для компонента E учитываются влияние погоды и течений на скорость и траекторию судов. Запретные зоны проверяются на пересечение траектории судна с ними. Если зона пересечения обнаруживается, принимается решение о коррекции маршрута и в дальнейшем о совершении необходимого маневра. 

Если вероятность столкновения высока, то требуется коррекция курсов и/или скорости для избежания столкновения. Принятие решения о совершении маневров для избежания столкновения осуществляется таким образом, чтобы минимизировать риски столкновения между всеми судами, исключить попадание в опасные зоны для движения и учитывать правила МППСС-72. 

По окончанию принятие решения о совершаемых действиях, судна начинают совершать необходимые маневры. В процессе маневрирования судов, осуществляется контроль выполнения действий и также анализ рисков столкновений для дальнейшего хода судов. На данном этапе возможна корректировка курсов и/или скоростей.

После совершения маневра вновь производится мониторинг текущей ситуации в водных пространствах и анализ рисков столкновений. Если все суда находятся в безопасном положение, то движение дальше осуществляется по заданному маршруту. Иначе цикл действий повторяется.

## Заключение
В рамках данного исследования была разработана математическая модель, описывающая поведение группы судов для безопасного автономного расхождения в условиях высокой плотности морского трафика и изменяющихся внешних факторов. Обзор существующих методов показал разнообразие подходов к решению задачи безопасного расхождения, однако большинство из них не учитывают весь спектр внешних факторов, таких как погодные условия и опасные зоны.

Критерии сравнения позволили оценить различные методы и выбрать наиболее перспективные для дальнейшей разработки. Созданная математическая модель учитывает динамику движения судов, влияние внешних факторов и правила безопасности, установленные международными стандартами. Направлением дальнейших исследований будет являться разработка архитектуры решения на основе разработанной модели. 

## Список использованных источников 
1. Шесть стран запустили инициативу по развитию автономного судоходства, 06.08.2020 URL: https://portnews.ru/news/299804
2. Конвенция о Международных правилах предупреждения столкновения судов в море (МППСС-72)
3. Смоленцев С. В. Кооперативное маневрирование безэкипажных судов для безопасного расхождения в море / С. В. Смоленцев, А. Е. Сазонов Ю. М. Искандеров // Вестник Государственного университета морского и речного флота имени адмирала С. О. Макарова. — 2018. — Т. 10. — № 4. — С. 687–695. DOI: 10.21821/2309-5180-2018-10-4-687-695 
4. Артемьев А.В., Петров В.А., Гриняк В.М. Численное исследование задачи безопасного расхождения групп морских автономных надводных судов // Территория новых возможностей. Вестник Владивостокского государственного университета. 2023. Т. 15, № 3. С. 104–119. DOI: https://doi.org/10.24866/VVSU/2949-1258/2023-3/104-119.
5. Zhang, J., Zhang, D., Yan, X., Haugen, S., & Guedes Soares, C. (2015). A distributed anti-collision decision support formulation in multi-ship encounter situations under COLREGs. Ocean Engineering, 105, 336–348. doi:10.1016/j.oceaneng.2015.06.054 
6. Shen, H., Hashimoto, H., Matsuda, A., Taniguchi, Y., Terada, D., & Guo, C. (2019). Automatic collision avoidance of multiple ships based on deep Q-learning. Applied Ocean Research, 86, 268–288. doi:10.1016/j.apor.2019.02.020 
7. Szlapczynski R. On evolutionary computing in multi-ship trajectory planning / R. Szlapczynski, J. Szlapczynska // Applied Intelligence. — 2012. — Vol. 37. — Is. 2. — Pp. 155–174. DOI: 10.1007/s10489-011-0319-7. 
